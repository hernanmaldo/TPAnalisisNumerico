@model AnlisisNumericoWeb.Models.IntegracionModel

@{
    ViewData["Title"] = "Integración Numérica";
}

<h2>Integración Numérica</h2>

<form asp-action="Resultado" method="post">
    <div>
        <label for="Funcion" style="color: white;">Función:</label>
        <input type="text" asp-for="Funcion" placeholder="Ej: x^2 + 3*x" />
    </div>
   
    <div>
        <label for="Limite inferior" style="color: white;">Limite inferior: </label>
        <input type="number" asp-for="LimiteInferior" step="any" />
    </div>
    <div>
        <label for="Limite superior" style="color: white;">Limite superior:</label>
        <input type="number" asp-for="LimiteSuperior" step="any" />
    </div>
    <div>
        <label for="Numero Intervalos" style="color: white;">Numero Intervalos: </label>
        <input type="number" asp-for="NumeroIntervalos" />
    </div>
    <div>
        <label>Método:</label>
        <select asp-for="Metodo">
            <option value="TrapecioSimple">Trapecio Simple</option>
            <option value="TrapecioMultiple">Trapecio Múltiple</option>
            <option value="Simpson13">Simpson 1/3</option>
            <option value="Simpson38">Simpson 3/8</option>
        </select>
    </div>
    <div>
        <button type="submit">Calcular</button>
    </div>
</form>

        <div class="result-section">
            <h2>Resultado</h2>
            @if (Model.Resultado != 0)
            {
                <p>Área aproximada: <strong>@Model.Resultado</strong></p>
            }
            else
            {
                <p>No se ha calculado ninguna integral todavía.</p>
            }
            <canvas id="grafico"></canvas>
        </div>

    <script>
        function toggleIntervalos() {
            const metodo = document.getElementById('Metodo').value;
            const label = document.getElementById('labelIntervalos');
            const input = document.getElementById('NumeroIntervalos');

            // Métodos que sí necesitan número de intervalos
            const metodosConIntervalos = ['trapecio_multiple', 'simpson13_multiple'];

            if (metodosConIntervalos.includes(metodo)) {
                label.style.display = 'block';
                input.style.display = 'block';
                input.required = true;
            } else {
                label.style.display = 'none';
                input.style.display = 'none';
                input.required = false;
                input.value = '';
            }
        }

        // Para que funcione al cargar la página
        document.addEventListener('DOMContentLoaded', toggleIntervalos);
    </script>
</html>
